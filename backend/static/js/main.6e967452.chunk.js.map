{"version":3,"sources":["components/header/header.tsx","components/base-layout/base-layout.tsx","api/client.ts","api/api.ts","hooks/useFetch.ts","components/add-item-form/add-item-form.tsx","components/suppliers-list/suppliers-list.tsx","components/settings/settings.tsx","pages/Dashboard/Dashboard.tsx","App.tsx","index.tsx"],"names":["Header","className","BaseLayout","axiosInstance","axios","create","baseURL","timeout","client","get","delete","post","put","patch","request","getItems","searchItem","search","params","getSuppliersByItemId","id","item","useFetch","fetchMethod","initialParams","forceStart","useState","updateParams","isLoading","setIsLoading","data","setData","hasError","setHasError","isDone","setIsDone","errorMessage","setErrorMessage","refetchIndex","setRefetchIndex","refetch","prevRefetchIndex","fetch","useCallback","restParams","then","response","status","catch","err","message","finally","useEffect","AddItemForm","onAdd","onSelect","options","loading","validOptions","setValidOptions","setSearch","newOptions","reduce","acc","category","title","children","items","map","count","label","activeSuppliers","value","style","display","justifyContent","catOption","handleChange","select","handleSearch","handleAdd","notFoundContent","useMemo","icon","PlusOutlined","onClick","dropdownClassName","onSearch","filterOption","inputValue","option","toLowerCase","includes","placeholder","allowClear","SuppliersList","memo","onClose","visible","suppliers","placement","JSON","stringify","Panel","Collapse","SettingsModal","onSubmit","_search","handleClose","searchModule","Item","tooltip","wrapperCol","span","labelCol","min","valuePropName","scoringModule","onCancel","footer","onFinish","layout","labelWrap","size","labelAlign","requiredMark","name","required","direction","width","onInput","e","target","accept","UploadOutlined","ghost","expandIconPosition","defaultActiveKey","header","noStyle","type","htmlType","columns","dataIndex","key","align","DashboardPage","fetchItemsRequest","searchItemRequest","fetchSuppliersRequest","rawData","setRawData","selectedItem","setSelectedItem","setSuppliers","isSuppliersListVisible","setIsSuppliersListVisible","isSettingsVisible","setIsSettingsVisible","formatItemsResponse","categories","dataItems","categoryItems","categoryRowItem","push","handleRowItemClick","res","handleSuppliersListClose","handleAddItemSubmit","handleItemSelect","openSettingsModal","handleSettingsModalClose","filteredData","find","handleAddItem","SettingOutlined","dataSource","pagination","position","scroll","y","bordered","rowClassName","record","onRow","rowIndex","expandable","defaultExpandAllRows","showExpandColumn","expandRowByClick","rowExpandable","App","path","element","index","ReactDOM","render","StrictMode","locale","ruRU","document","getElementById"],"mappings":"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","file":"static/js/main.6e967452.chunk.js","sourcesContent":["import React, { FC } from 'react';\nimport './header.scss';\n\nexport const Header: FC = () => {\n  return (\n    <div className=\"header\">\n      <div className=\"header__logo\"></div>\n      <div className=\"header__label\">Поиск поставщиков</div>\n\n      {/* <div className=\"header__nav\"></div> */}\n    </div>\n  );\n};\n","import React, { FC } from 'react';\nimport { Outlet } from 'react-router-dom';\nimport { Header } from '../header/header';\n\nimport './base-layout.scss';\n\nexport const BaseLayout: FC = () => {\n  return (\n    <div className=\"base-layout\">\n      <Header />\n      <div className=\"base-layout__main\">\n        <Outlet />\n      </div>\n    </div>\n  );\n};\n","import axios from 'axios';\n\nconst timeout = 600000;\nconst axiosInstance = axios.create({\n  baseURL: process.env.NODE_ENV === 'production' ? '/api' : 'http://93.157.254.203:7778/api',\n  timeout,\n});\n\n// const defaultErrorInterceptor = (error) => Promise.reject(error);\n// const defaultRequestInterceptor = (config) => config;\n// const defaultResponseInterceptor = (response) => response;\n\nexport function setHeader(key: string, value: string) {\n  axiosInstance.defaults.headers.common[key] = value;\n}\n\nexport function unsetHeader(key: string) {\n  delete axiosInstance.defaults.headers.common[key];\n}\n\n// export function addRequestInterceptor({ request, error }) {\n//   const interceptor = axiosInstance.interceptors.request.use(\n//     request || defaultRequestInterceptor,\n//     error || defaultErrorInterceptor\n//   );\n//   return () => {\n//     axiosInstance.interceptors.request.eject(interceptor);\n//   };\n// }\n\n// export function addResponseInterceptor({ response, error }) {\n//   const interceptor = axiosInstance.interceptors.response.use(\n//     response || defaultResponseInterceptor,\n//     error || defaultErrorInterceptor\n//   );\n//   return () => {\n//     axiosInstance.interceptors.response.eject(interceptor);\n//   };\n// }\n\n// const get = (url, config) => {\n//   return axiosInstance.get(url, config).then((response) => response.data);\n// };\n\nconst client = {\n  get: axiosInstance.get,\n  delete: axiosInstance.delete,\n  post: axiosInstance.post,\n  put: axiosInstance.put,\n  patch: axiosInstance.patch,\n  request: axiosInstance.request,\n};\n\nexport default client;\n","import client from './client';\n\nexport function getItems() {\n  return client.get('/items');\n}\n\nexport function searchItem({ search }: { search: string }) {\n  return client.get('/item', { params: { search } });\n}\n\nexport function getSuppliersByItemId({ id }: { id: number }) {\n  return client.get('/suppliers', { params: { item: id } });\n}\n","import { useState, useEffect, useCallback } from 'react';\n\nconst useFetch = <T>(\n  fetchMethod: (params: any) => Promise<any>,\n  initialParams: Record<string, any> = {},\n  forceStart = false\n) => {\n  const [params, updateParams] = useState(initialParams);\n  const [isLoading, setIsLoading] = useState(false);\n  const [data, setData] = useState<T>();\n  const [hasError, setHasError] = useState(false);\n  const [isDone, setIsDone] = useState(false);\n  const [errorMessage, setErrorMessage] = useState('');\n  const [refetchIndex, setRefetchIndex] = useState(0);\n\n  const refetch = () => setRefetchIndex((prevRefetchIndex) => prevRefetchIndex + 1);\n\n  const fetch = useCallback(\n    (restParams = {}) => {\n      setIsLoading(true);\n\n      return fetchMethod({ ...params, ...restParams })\n        .then((response) => {\n          if (response.status === 200) {\n            setData(response.data);\n          } else {\n            setHasError(true);\n            setErrorMessage(response.data);\n          }\n          return response.data;\n        })\n        .catch((err) => {\n          setHasError(true);\n          setErrorMessage(err?.message);\n        })\n        .finally(() => {\n          setIsLoading(false);\n          setIsDone(true);\n        });\n    },\n    [setIsLoading, fetchMethod, params, setData, setHasError, setErrorMessage]\n  );\n\n  useEffect(() => {\n    if (!forceStart) {\n      return;\n    }\n\n    fetch();\n  }, [fetch, forceStart, refetchIndex]);\n\n  return { fetch, data, isLoading, isDone, hasError, errorMessage, updateParams, refetch };\n};\n\nexport default useFetch;\n","import { Button, AutoComplete, Cascader, Input } from 'antd';\nimport { SearchOutlined, PlusOutlined, UserOutlined } from '@ant-design/icons';\nimport React, { FC, useCallback, useEffect, useMemo, useState } from 'react';\nimport './add-item-form.scss';\n\nconst renderTitle = (title: string) => <span>{title}</span>;\nconst renderItem = (title: string, count?: number | null) => ({\n  value: title,\n  label: (\n    <div\n      style={{\n        display: 'flex',\n        justifyContent: 'space-between',\n      }}\n    >\n      {title}\n      {count && <span>Поставщиков {count}</span>}\n    </div>\n  ),\n});\n\ntype Props = {\n  onAdd: (search: string) => void;\n  onSelect: (item: any) => void;\n  loading?: boolean;\n  options: any[];\n};\nexport const AddItemForm: FC<Props> = ({ onAdd, onSelect, options, loading = false }) => {\n  const [validOptions, setValidOptions] = useState<any[]>([]);\n  const [search, setSearch] = useState('');\n\n  useEffect(() => {\n    const newOptions = options.reduce((acc, category) => {\n      const children = category.items.map(({ id, label, activeSuppliers }: any) => ({\n        ...renderItem(label, activeSuppliers),\n      }));\n      const catOption = {\n        value: category.title,\n        title: category.title,\n        label: renderTitle(category.title),\n        options: children,\n      };\n\n      return [...acc, catOption];\n    }, []);\n\n    setValidOptions(newOptions);\n  }, [options, setValidOptions]);\n\n  const handleChange = useCallback(\n    (select: any) => {\n      onSelect(select);\n    },\n    [onSelect]\n  );\n\n  const handleSearch = useCallback(\n    (value) => {\n      setSearch(value);\n    },\n    [setSearch]\n  );\n  const handleAdd = useCallback(() => {\n    onAdd(search);\n  }, [onAdd, search]);\n  const notFoundContent = useMemo(\n    () => (\n      <div className=\"add-item-form__empty\">\n        <span className=\"add-item-form__empty-text\">Не найдено</span>\n        <Button icon={<PlusOutlined />} onClick={handleAdd} className=\"add-item-form__button\" loading={loading}>\n          Добавить номенклатуру\n        </Button>\n      </div>\n    ),\n    [handleAdd, loading]\n  );\n\n  return (\n    <div className=\"add-item-form\">\n      <AutoComplete\n        className=\"add-item-form__search\"\n        dropdownClassName=\"add-item-form__search-dropdown\"\n        options={validOptions}\n        onSelect={handleChange}\n        onSearch={handleSearch}\n        filterOption={(inputValue, option) => option!.value.toLowerCase().includes(inputValue.toLowerCase())}\n        notFoundContent={notFoundContent}\n        placeholder=\"Поиск по названию номенклатуры\"\n        allowClear\n      />\n    </div>\n  );\n};\n","import React, { FC, memo } from 'react';\nimport { Drawer } from 'antd';\nimport './suppliers-list.scss';\n\ntype Props = {\n  visible: boolean;\n  onClose: () => void;\n  suppliers?: any;\n};\nexport const SuppliersList: FC<Props> = memo(({ onClose, visible, suppliers }) => {\n  return (\n    <Drawer title=\"Поставщики\" placement=\"right\" onClose={onClose} visible={visible}>\n      <p>{JSON.stringify(suppliers)}</p>\n    </Drawer>\n  );\n});\n","import React, { FC, memo, useEffect, useMemo, useState } from 'react';\nimport { Space, Button, Collapse, Form, Modal, Checkbox, Input, InputNumber, Upload } from 'antd';\nimport { UploadOutlined } from '@ant-design/icons';\nimport './settings.scss';\n\nconst { Panel } = Collapse;\n\ntype Props = {\n  visible?: boolean;\n  search?: string;\n  onClose?: () => void;\n  onSubmit?: (search: string) => void;\n};\nexport const SettingsModal: FC<Props> = memo(({ search, visible, onClose, onSubmit }) => {\n  const [_search, setSearch] = useState(search);\n  const handleInput = (e: any) => setSearch(e.target.value);\n  useEffect(() => {\n    setSearch(search);\n  }, [search, setSearch]);\n\n  const handleSave = () => {\n    if (!_search) return;\n    onSubmit && onSubmit(_search);\n    handleClose();\n  };\n  const handleReset = () => {\n    onClose && onClose();\n  };\n  const handleClose = () => {\n    onClose && onClose();\n  };\n\n  const searchModule = useMemo(\n    () => (\n      <>\n        <Form.Item label=\"Адрес объекта\" tooltip=\"Искать поставщиков для объекта по адресу\" wrapperCol={{ span: 10 }}>\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Мин. количество поставщиков\" tooltip=\"Влияет на скорость поиска\" labelCol={{ span: 17 }}>\n          <InputNumber min={0} />\n        </Form.Item>\n        <Form.Item\n          label=\"Мин. количество «надёжных» поставщиков\"\n          tooltip=\"Влияет на скорость поиска\"\n          labelCol={{ span: 17 }}\n        >\n          <InputNumber min={0} />\n        </Form.Item>\n        <Form.Item valuePropName=\"checked\">\n          <Checkbox>Искать только действующих поставщиков</Checkbox>\n        </Form.Item>\n        <Form.Item valuePropName=\"checked\" className=\"settings__checkbox\">\n          <Checkbox>Искать только производителей</Checkbox>\n        </Form.Item>\n      </>\n    ),\n    []\n  );\n  const scoringModule = useMemo(\n    () => (\n      <>\n        <Form.Item label=\"Уставной капитал, не менее\" labelCol={{ span: 12 }}>\n          <InputNumber min={0} />\n        </Form.Item>\n        <Form.Item label=\"Лет работы, не менее\" labelCol={{ span: 12 }}>\n          <InputNumber min={0} />\n        </Form.Item>\n      </>\n    ),\n    []\n  );\n\n  return (\n    <Modal title=\"Настройки поиска поставщиков\" visible={visible} onCancel={handleClose} footer={null}>\n      <Form onFinish={handleSave} layout=\"horizontal\" labelWrap size=\"small\" labelAlign=\"left\" requiredMark={false}>\n        <Form.Item label=\"Номенклатура\" name=\"search\" required>\n          <Space direction=\"vertical\" style={{ width: '100%' }}>\n            <Input placeholder=\"Номенклатура для поиска\" name=\"search\" value={_search} onInput={handleInput} />\n            <Upload accept=\".xsl,.xlsx,.csv\">\n              или <Button icon={<UploadOutlined />}>Загрузить в формате xls, csv</Button>\n            </Upload>\n          </Space>\n        </Form.Item>\n\n        <Collapse ghost className=\"settings\" expandIconPosition=\"left\" defaultActiveKey={['1', '2']}>\n          <Panel header=\"Модуль поиска\" key=\"1\">\n            {searchModule}\n          </Panel>\n          <Panel header=\"Модуль скоринга «надёжного» поставщика\" key=\"2\">\n            {scoringModule}\n          </Panel>\n          {/* <Panel header=\"Технические настройки\" key=\"3\"></Panel> */}\n        </Collapse>\n\n        <Form.Item noStyle>\n          <Space className=\"settings__footer\">\n            <Button size=\"middle\" onClick={handleReset} type=\"ghost\" htmlType=\"reset\">\n              Сбросить\n            </Button>\n            <Button size=\"middle\" type=\"primary\" htmlType=\"submit\">\n              Добавить\n            </Button>\n          </Space>\n        </Form.Item>\n      </Form>\n    </Modal>\n  );\n});\n","import React, { FC, useCallback, useEffect, useMemo, useState } from 'react';\nimport { getItems, getSuppliersByItemId, searchItem } from '../../api/api';\nimport useFetch from '../../hooks/useFetch';\n\nimport { Button, Table } from 'antd';\nimport { ColumnsType } from 'antd/es/table';\n// import { DownOutlined } from '@ant-design/icons';\nimport { SettingOutlined } from '@ant-design/icons';\n\nimport './dashboard.scss';\nimport { AddItemForm } from '../../components/add-item-form/add-item-form';\nimport { SuppliersList } from '../../components/suppliers-list/suppliers-list';\nimport { SettingsModal } from '../../components/settings/settings';\n\nconst columns: ColumnsType<any> = [\n  {\n    title: 'Категория',\n    dataIndex: 'category',\n    key: 'category',\n    width: '18%',\n    className: 'dashboard__column--bold',\n  },\n  {\n    title: 'Номенклатура',\n    dataIndex: 'label',\n    key: 'label',\n    className: 'dashboard__column--bold',\n  },\n  {\n    title: 'Активных поставщиков',\n    dataIndex: 'activeSuppliers',\n    key: 'activeSuppliers',\n    width: '12%',\n    align: 'right',\n    className: 'dashboard__column--bold',\n  },\n  {\n    title: 'Надежных поставщиков',\n    dataIndex: 'reliableSuppliers',\n    key: 'reliableSuppliers',\n    width: '12%',\n    align: 'right',\n    className: 'dashboard__column--bold',\n  },\n  {\n    title: 'Поставщиков без проверки',\n    dataIndex: 'unverifiedSuppliers',\n    key: 'unverifiedSuppliers',\n    width: '12%',\n    align: 'right',\n  },\n  {\n    title: 'Ненадежных поставщиков',\n    dataIndex: 'unreliableSupplier',\n    key: 'unreliableSupplier',\n    width: '12%',\n    align: 'right',\n  },\n];\n\nexport const DashboardPage: FC = () => {\n  const fetchItemsRequest = useFetch(getItems);\n  const searchItemRequest = useFetch(searchItem);\n  const fetchSuppliersRequest = useFetch(getSuppliersByItemId);\n\n  const [rawData, setRawData] = useState([]);\n  const [selectedItem, setSelectedItem] = useState('');\n  const [search, setSearch] = useState('');\n  const [data, setData] = useState([]);\n  const [suppliers, setSuppliers] = useState([]);\n  const [isSuppliersListVisible, setIsSuppliersListVisible] = useState(false);\n  const [isSettingsVisible, setIsSettingsVisible] = useState(false);\n\n  const formatItemsResponse = useCallback(\n    (response) => {\n      if (!response || !response.categories) {\n        setData([]);\n        setRawData([]);\n        return;\n      }\n\n      const { categories } = response;\n\n      const dataItems = categories.reduce((acc: any, category: any) => {\n        const categoryItems = category.items.map((item: any) => ({ ...item, key: item.id, category: category.title }));\n        const categoryRowItem = {\n          key: `${category.id}-category`,\n          label: '',\n          category: category.title,\n          children: categoryItems,\n        };\n\n        acc.push(categoryRowItem);\n        return acc;\n      }, []);\n\n      setRawData(categories);\n      setData(dataItems);\n    },\n    [setData, setRawData]\n  );\n\n  useEffect(() => {\n    fetchItemsRequest.fetch().then(formatItemsResponse);\n    // eslint-disable-next-line\n  }, []);\n\n  const handleRowItemClick = useCallback(\n    (id: any) => {\n      setIsSuppliersListVisible(true);\n      fetchSuppliersRequest.fetch({ id }).then((res) => {\n        setSuppliers(res);\n      });\n    },\n    [setSuppliers, fetchSuppliersRequest]\n  );\n  const handleSuppliersListClose = useCallback(() => {\n    setIsSuppliersListVisible(false);\n  }, [setIsSuppliersListVisible]);\n\n  const handleAddItemSubmit = useCallback(\n    (search: string) => {\n      if (!search) return;\n\n      searchItemRequest.fetch({ search }).then((res) => {\n        formatItemsResponse(res);\n      });\n    },\n    [searchItemRequest, formatItemsResponse]\n  );\n  const handleItemSelect = useCallback(\n    (item) => {\n      setSelectedItem(item || '');\n    },\n    [setSelectedItem]\n  );\n  const openSettingsModal = useCallback(() => {\n    setIsSettingsVisible(true);\n  }, [setIsSettingsVisible]);\n  const handleSettingsModalClose = useCallback(() => {\n    setIsSettingsVisible(false);\n  }, [setIsSettingsVisible]);\n\n  const filteredData = useMemo(() => {\n    if (!selectedItem) return data;\n\n    const item = data.find(({ children }: any) => children.find(({ label }: any) => label === selectedItem));\n    return [item];\n  }, [selectedItem, data]);\n\n  const handleAddItem = useCallback(\n    (search: string) => {\n      setSearch(search);\n      openSettingsModal();\n    },\n    [setSearch, openSettingsModal]\n  );\n\n  return (\n    <div className=\"dashboard\">\n      <div className=\"dashboard__form-wrapper\">\n        <AddItemForm\n          onAdd={handleAddItem}\n          onSelect={handleItemSelect}\n          options={rawData}\n          loading={searchItemRequest.isLoading}\n        />\n        <Button\n          className=\"dashboard__settings-button\"\n          type=\"primary\"\n          icon={<SettingOutlined />}\n          onClick={openSettingsModal}\n        />\n      </div>\n      <SettingsModal\n        visible={isSettingsVisible}\n        onClose={handleSettingsModalClose}\n        onSubmit={handleAddItemSubmit}\n        search={search}\n      />\n\n      <Table\n        columns={columns}\n        dataSource={filteredData}\n        pagination={{ position: [] }}\n        scroll={{ y: 700 }}\n        bordered\n        size=\"small\"\n        loading={fetchItemsRequest.isLoading || searchItemRequest.isLoading}\n        rowClassName={(record) => (!record.label ? 'dashboard__row--category' : '')}\n        onRow={(record, rowIndex) => ({\n          onClick: () => {\n            if (record.label) {\n              handleRowItemClick(record.id);\n            }\n          },\n        })}\n        expandable={{\n          defaultExpandAllRows: true,\n          showExpandColumn: true,\n          expandRowByClick: true,\n          rowExpandable: (record) => !record.label,\n        }}\n        className=\"dashboard__table\"\n      />\n\n      <SuppliersList visible={isSuppliersListVisible} onClose={handleSuppliersListClose} suppliers={suppliers} />\n    </div>\n  );\n};\n","import React, { FC } from 'react';\nimport { Routes, Route } from 'react-router-dom';\n\nimport { BaseLayout } from './components/base-layout/base-layout';\nimport { DashboardPage } from './pages/Dashboard/Dashboard';\n\nexport const App: FC = () => {\n  return (\n    <Routes>\n      <Route path=\"/\" element={<BaseLayout />}>\n        <Route index element={<DashboardPage />} />\n      </Route>\n    </Routes>\n  );\n};\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { App } from './App';\nimport { BrowserRouter } from 'react-router-dom';\nimport { ConfigProvider } from 'antd';\nimport ruRU from 'antd/lib/locale/ru_RU';\n\nimport './assets/styles/index.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <ConfigProvider locale={ruRU}>\n        <App />\n      </ConfigProvider>\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}