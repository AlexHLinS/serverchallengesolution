(this["webpackJsonptezos-flame-defi"]=this["webpackJsonptezos-flame-defi"]||[]).push([[0],{165:function(e,t,a){},167:function(e,t,a){},185:function(e,t,a){},186:function(e,t,a){},256:function(e,t,a){},257:function(e,t,a){},263:function(e,t,a){},264:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a.n(c),i=a(38),s=a.n(i),l=a(24),r=(a(165),a(10)),o=function(){return Object(r.jsxs)("div",{className:"header",children:[Object(r.jsx)("div",{className:"header__logo"}),Object(r.jsx)("div",{className:"header__label",children:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a\u043e\u0432"})]})},b=(a(167),function(){return Object(r.jsxs)("div",{className:"base-layout",children:[Object(r.jsx)(o,{}),Object(r.jsx)("div",{className:"base-layout__main",children:Object(r.jsx)(l.a,{})})]})}),j=a(3),d=a(5),u=a(151),h=a.n(u).a.create({baseURL:"/api",timeout:6e5});var O={get:h.get,delete:h.delete,post:h.post,put:h.put,patch:h.patch,request:h.request};function m(){return O.get("/items")}function p(e){var t=e.search;return O.post("/items",{search:t})}function f(e){var t=e.id;return O.get("/suppliers",{params:{item:t}})}var x=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=Object(c.useState)(t),i=Object(d.a)(n,2),s=i[0],l=i[1],r=Object(c.useState)(!1),o=Object(d.a)(r,2),b=o[0],u=o[1],h=Object(c.useState)(),O=Object(d.a)(h,2),m=O[0],p=O[1],f=Object(c.useState)(!1),x=Object(d.a)(f,2),g=x[0],v=x[1],y=Object(c.useState)(!1),_=Object(d.a)(y,2),C=_[0],k=_[1],S=Object(c.useState)(""),N=Object(d.a)(S,2),w=N[0],I=N[1],z=Object(c.useState)(0),E=Object(d.a)(z,2),L=E[0],P=E[1],F=function(){return P((function(e){return e+1}))},M=Object(c.useCallback)((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u(!0),e(Object(j.a)(Object(j.a)({},s),t)).then((function(e){return 200===e.status?p(e.data):(v(!0),I(e.data)),e.data})).catch((function(e){v(!0),I(null===e||void 0===e?void 0:e.message)})).finally((function(){u(!1),k(!0)}))}),[u,e,s,p,v,I]);return Object(c.useEffect)((function(){a&&M()}),[M,a,L]),{fetch:M,data:m,isLoading:b,isDone:C,hasError:g,errorMessage:w,updateParams:l,refetch:F}},g=a(47),v=a(265),y=a(272),_=(a(185),a(266)),C=a(155),k=a(82),S=(a(186),function(e){var t=e.onSubmit,a=e.loading,n=void 0!==a&&a,i=Object(c.useState)(""),s=Object(d.a)(i,2),l=s[0],o=s[1],b=Object(c.useCallback)((function(e){o(e.target.value)}),[o]),j=Object(c.useCallback)((function(){t(l)}),[t,l]);return Object(r.jsxs)(_.a,{dir:"horizontal",className:"add-item-form",onFinish:j,children:[Object(r.jsx)(C.a,{value:l,onChange:b,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043d\u043e\u043c\u0435\u043d\u043a\u043b\u0430\u0442\u0443\u0440\u044b"}),Object(r.jsx)(g.a,{type:"primary",icon:Object(r.jsx)(k.a,{}),htmlType:"submit",className:"add-item-form__button",loading:n,children:"\u0418\u0441\u043a\u0430\u0442\u044c"})]})}),N=a(270),w=(a(256),Object(c.memo)((function(e){var t=e.onClose,a=e.visible,c=e.suppliers;return Object(r.jsx)(N.a,{title:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a\u0438",placement:"right",onClose:t,visible:a,children:Object(r.jsx)("p",{children:JSON.stringify(c)})})}))),I=a(269),z=a(267),E=a(84),L=a(268),P=a(271),F=(a(257),I.a.Panel),M=Object(c.memo)((function(e){var t=e.visible,a=e.onClose,n=function(){},i=Object(c.useMemo)((function(){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(_.a.Item,{label:"\u0410\u0434\u0440\u0435\u0441 \u043e\u0431\u044a\u0435\u043a\u0442\u0430",tooltip:"\u0418\u0441\u043a\u0430\u0442\u044c \u043f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a\u043e\u0432 \u0434\u043b\u044f \u043e\u0431\u044a\u0435\u043a\u0442\u0430 \u043f\u043e \u0430\u0434\u0440\u0435\u0441\u0443",wrapperCol:{span:10},children:Object(r.jsx)(C.a,{})}),Object(r.jsx)(_.a.Item,{label:"\u041c\u0438\u043d. \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a\u043e\u0432",tooltip:"\u0412\u043b\u0438\u044f\u0435\u0442 \u043d\u0430 \u0441\u043a\u043e\u0440\u043e\u0441\u0442\u044c \u043f\u043e\u0438\u0441\u043a\u0430",labelCol:{span:17},children:Object(r.jsx)(z.a,{min:0})}),Object(r.jsx)(_.a.Item,{label:"\u041c\u0438\u043d. \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \xab\u043d\u0430\u0434\u0451\u0436\u043d\u044b\u0445\xbb \u043f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a\u043e\u0432",tooltip:"\u0412\u043b\u0438\u044f\u0435\u0442 \u043d\u0430 \u0441\u043a\u043e\u0440\u043e\u0441\u0442\u044c \u043f\u043e\u0438\u0441\u043a\u0430",labelCol:{span:17},children:Object(r.jsx)(z.a,{min:0})}),Object(r.jsx)(_.a.Item,{valuePropName:"checked",children:Object(r.jsx)(E.a,{children:"\u0418\u0441\u043a\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0434\u0435\u0439\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0445 \u043f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a\u043e\u0432"})}),Object(r.jsx)(_.a.Item,{valuePropName:"checked",className:"settings__checkbox",children:Object(r.jsx)(E.a,{children:"\u0418\u0441\u043a\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u0435\u0439"})})]})}),[]),s=Object(c.useMemo)((function(){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(_.a.Item,{label:"\u0423\u0441\u0442\u0430\u0432\u043d\u043e\u0439 \u043a\u0430\u043f\u0438\u0442\u0430\u043b, \u043d\u0435 \u043c\u0435\u043d\u0435\u0435",labelCol:{span:12},children:Object(r.jsx)(z.a,{min:0})}),Object(r.jsx)(_.a.Item,{label:"\u041b\u0435\u0442 \u0440\u0430\u0431\u043e\u0442\u044b, \u043d\u0435 \u043c\u0435\u043d\u0435\u0435",labelCol:{span:12},children:Object(r.jsx)(z.a,{min:0})})]})}),[]);return Object(r.jsx)(L.a,{title:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0438\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u0430",visible:t,onCancel:function(){a&&a()},footer:null,children:Object(r.jsxs)(_.a,{onFinish:n,layout:"horizontal",labelWrap:!0,size:"small",labelAlign:"left",children:[Object(r.jsxs)(I.a,{ghost:!0,className:"settings",expandIconPosition:"left",defaultActiveKey:["1","2"],children:[Object(r.jsx)(F,{header:"\u041c\u043e\u0434\u0443\u043b\u044c \u043f\u043e\u0438\u0441\u043a\u0430",children:i},"1"),Object(r.jsx)(F,{header:"\u041c\u043e\u0434\u0443\u043b\u044c \u0441\u043a\u043e\u0440\u0438\u043d\u0433\u0430 \xab\u043d\u0430\u0434\u0451\u0436\u043d\u043e\u0433\u043e\xbb \u043f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a\u0430",children:s},"2"),Object(r.jsx)(F,{header:"\u0422\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"},"3")]}),Object(r.jsx)(_.a.Item,{noStyle:!0,children:Object(r.jsxs)(P.b,{className:"settings__footer",children:[Object(r.jsx)(g.a,{size:"middle",onClick:function(){a&&a()},type:"ghost",htmlType:"reset",children:"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c"}),Object(r.jsx)(g.a,{size:"middle",onClick:n,type:"primary",htmlType:"submit",children:"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c"})]})})]})})})),R=function(){var e=x(m),t=x(p),a=x(f),n=Object(c.useState)([]),i=Object(d.a)(n,2),s=i[0],l=i[1],o=Object(c.useState)([]),b=Object(d.a)(o,2),u=b[0],h=b[1],O=Object(c.useState)(!1),_=Object(d.a)(O,2),C=_[0],k=_[1],N=Object(c.useState)(!1),I=Object(d.a)(N,2),z=I[0],E=I[1];Object(c.useEffect)((function(){e.fetch().then((function(e){e&&e.categories||l([]);var t=e.categories.reduce((function(e,t){var a=t.items.map((function(e){return Object(j.a)(Object(j.a)({},e),{},{key:e.id,category:t.title})})),c={key:"".concat(t.id,"-category"),label:"",category:t.title,children:a};return e.push(c),e}),[]);l(t)}))}),[]);var L=Object(c.useCallback)((function(e){k(!0),a.fetch({id:e}).then((function(e){h(e)}))}),[h,a]),P=Object(c.useCallback)((function(){k(!1)}),[k]),F=Object(c.useCallback)((function(e){t.fetch({search:e}).then((function(e){}))}),[t]),R=Object(c.useCallback)((function(){E(!0)}),[E]),A=Object(c.useCallback)((function(){E(!1)}),[E]);return Object(r.jsxs)("div",{className:"dashboard",children:[Object(r.jsxs)("div",{className:"dashboard__form-wrapper",children:[Object(r.jsx)(S,{onSubmit:F,loading:t.isLoading}),Object(r.jsx)(g.a,{className:"dashboard__settings-button",type:"primary",icon:Object(r.jsx)(y.a,{}),onClick:R})]}),Object(r.jsx)(M,{visible:z,onClose:A}),Object(r.jsx)(v.a,{columns:[{title:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f",dataIndex:"category",key:"category",width:"18%",className:"dashboard__column--bold"},{title:"\u041d\u043e\u043c\u0435\u043d\u043a\u043b\u0430\u0442\u0443\u0440\u0430",dataIndex:"label",key:"label",className:"dashboard__column--bold"},{title:"\u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0445 \u043f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a\u043e\u0432",dataIndex:"activeSuppliers",key:"activeSuppliers",width:"12%",align:"right",className:"dashboard__column--bold"},{title:"\u041d\u0430\u0434\u0435\u0436\u043d\u044b\u0445 \u043f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a\u043e\u0432",dataIndex:"reliableSuppliers",key:"reliableSuppliers",width:"12%",align:"right",className:"dashboard__column--bold"},{title:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a\u043e\u0432 \u0431\u0435\u0437 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438",dataIndex:"unverifiedSuppliers",key:"unverifiedSuppliers",width:"12%",align:"right"},{title:"\u041d\u0435\u043d\u0430\u0434\u0435\u0436\u043d\u044b\u0445 \u043f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a\u043e\u0432",dataIndex:"unreliableSupplier",key:"unreliableSupplier",width:"12%",align:"right"}],dataSource:s,pagination:{position:[]},scroll:{y:700},bordered:!0,size:"small",loading:e.isLoading||t.isLoading,rowClassName:function(e){return e.label?"":"dashboard__row--category"},onRow:function(e,t){return{onClick:function(){e.label&&L(e.id)}}},expandable:{defaultExpandAllRows:!0,showExpandColumn:!0,expandRowByClick:!0,rowExpandable:function(e){return!e.label}},className:"dashboard__table"}),Object(r.jsx)(w,{visible:C,onClose:P,suppliers:u})]})},A=function(){return Object(r.jsx)(l.d,{children:Object(r.jsx)(l.b,{path:"/",element:Object(r.jsx)(b,{}),children:Object(r.jsx)(l.b,{index:!0,element:Object(r.jsx)(R,{})})})})},J=a(99);a(263);s.a.render(Object(r.jsx)(n.a.StrictMode,{children:Object(r.jsx)(J.a,{children:Object(r.jsx)(A,{})})}),document.getElementById("root"))}},[[264,1,2]]]);
//# sourceMappingURL=main.36797103.chunk.js.map